import os
from dotenv import load_dotenv
import telebot

# ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
load_dotenv()
TOKEN = os.getenv("BOT_TOKEN")
ADMIN_ID = os.getenv("ADMIN_ID")

if not TOKEN or not ADMIN_ID:
    raise Exception("âŒ BOT_TOKEN Ø£Ùˆ ADMIN_ID ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ .env")

ADMIN_ID = int(ADMIN_ID)
bot = telebot.TeleBot(TOKEN)

# Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø­Ø³Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© (ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†)
RESPONSES = {
    "Ù…Ø±Ø­Ø¨Ø§": "ğŸ‘‹ Ø£Ù‡Ù„Ù‹Ø§ ÙˆØ³Ù‡Ù„Ù‹Ø§! ÙƒÙŠÙ Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯ÙƒØŸ",
    "Ø£Ù‡Ù„Ø§Ù‹": "ğŸŒ¸ Ø£Ù‡Ù„Ù‹Ø§ Ø¨Ùƒ! ÙŠØ³Ø¹Ø¯Ù†ÙŠ ØªÙˆØ§ØµÙ„Ùƒ.",
    "Ø§Ù„Ø³Ù„Ø§Ù…": "ğŸ ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡.",
    "Ø²ÙˆØ§Ø¬": "ğŸ’ Ù„Ø¯ÙŠÙ†Ø§ Ø¹Ø±ÙˆØ¶ Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ø²ÙˆØ§Ø¬ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù„ØªÙØ§ØµÙŠÙ„.",
    "Ø­Ù†Ø§Ø¡": "ğŸŒ¿ Ù†Ù‚Ø´ Ø§Ù„Ø­Ù†Ø§Ø¡ Ù…ØªØ§Ø­ Ø¨Ø£Ù†ÙˆØ§Ø¹ Ø®Ù„ÙŠØ¬ÙŠØ© ÙˆÙŠÙ…Ù†ÙŠØ© ÙØ®Ù…Ø©.",
    "Ø§Ù„Ø³Ø¹Ø±": "ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©. Ø±Ø§Ø³Ù„Ù†Ø§ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„.",
    "Ø§Ù„Ø£Ø³Ø¹Ø§Ø±": "ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©. Ø±Ø§Ø³Ù„Ù†Ø§ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„.",
    "Ù…ÙˆÙ‚Ø¹": "ğŸ“ Ù†Ø­Ù† Ù…ØªÙˆØ§Ø¬Ø¯ÙˆÙ† ÙÙŠ ØµÙ†Ø¹Ø§Ø¡ - Ù„Ù„ØªØ­Ø¯ÙŠØ¯ Ø¨Ø¯Ù‚Ø© ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø³Ù„ØªÙ†Ø§.",
    "Ø­Ø¬Ø²": "ğŸ“† Ù„Ù„Ø­Ø¬Ø² ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®.",
    "Ø±Ù‚Ù…": "ğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨: 777xxxxxxx",
    "ÙˆØ§ØªØ³": "ğŸ“± Ø±Ø§Ø³Ù„ÙŠÙ†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ù† Ø®Ù„Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø·: https://wa.me/967777xxxxxx",
    "Ø¹Ø±Ø¶": "ğŸ”¥ Ø¹Ø±ÙˆØ¶Ù†Ø§ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: Ø®ØµÙ… 20Ùª Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±!",
    "ØªØ¬Ø±Ø¨Ø©": "âœ¨ ÙŠÙ…ÙƒÙ† ØªØ±ØªÙŠØ¨ ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØªÙˆÙØ±. Ø±Ø§Ø³Ù„ÙŠÙ†Ø§ Ù„Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ¹Ø¯.",
    "Ù…ØªÙ‰": "ğŸ•’ Ù†Ø­Ù† Ù…ØªÙˆØ§Ø¬Ø¯ÙˆÙ† Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© 9 ØµØ¨Ø§Ø­Ù‹Ø§ Ø­ØªÙ‰ 9 Ù…Ø³Ø§Ø¡Ù‹ ÙŠÙˆÙ…ÙŠÙ‹Ø§.",
    "Ø´ÙƒØ±Ø§": "ğŸ™ Ø¹ÙÙˆÙ‹Ø§! ØªØ­Øª Ø£Ù…Ø±Ùƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.",
    "Ø´ÙƒØ±Ù‹Ø§": "ğŸ˜Š Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø­Ø¨ ÙˆØ§Ù„Ø³Ø¹Ø©!",
    "ÙƒÙ…": "ğŸ’¬ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¯Ù‚Ø©.",
    "ÙˆÙŠÙ†": "ğŸ“ Ù…ÙˆÙ‚Ø¹Ù†Ø§ ÙÙŠ ØµÙ†Ø¹Ø§Ø¡ - ÙˆØ³Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø¬Ø²."
}

# Ø¯Ø§Ù„Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ø¯ Ù…Ù†Ø§Ø³Ø¨
def get_response(text):
    for keyword, response in RESPONSES.items():
        if keyword in text:
            return response
    return "ğŸ¤– Ø´ÙƒØ±Ù‹Ø§ Ù„Ø±Ø³Ø§Ù„ØªÙƒ! ÙŠØ±Ø¬Ù‰ ØªÙˆØ¶ÙŠØ­ Ø³Ø¤Ø§Ù„Ùƒ Ø£ÙƒØ«Ø± Ù„Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø®Ø¯Ù…ØªÙƒ."

# Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ø±Ø³Ø§Ù„Ø©
@bot.message_handler(func=lambda message: True)
def handle_message(message):
    user_text = message.text.lower()
    user_id = message.from_user.id

    # Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø£Ø¯Ù…Ù†
    if user_id == ADMIN_ID:
        if user_text.startswith("/Ø§Ø¶Ù "):
            try:
                parts = user_text[5:].split("=>")
                if len(parts) != 2:
                    raise ValueError
                keyword = parts[0].strip()
                reply = parts[1].strip()
                RESPONSES[keyword] = reply
                bot.reply_to(message, f"âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¯:\n{keyword} => {reply}")
            except:
                bot.reply_to(message, "âŒ Ø§Ù„ØµÙŠØºØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø§Ø³ØªØ®Ø¯Ù…: /Ø§Ø¶Ù ÙƒÙ„Ù…Ø© => Ø§Ù„Ø±Ø¯")
            return

        elif user_text.startswith("/Ø­Ø°Ù "):
            keyword = user_text[6:].strip()
            if keyword in RESPONSES:
                del RESPONSES[keyword]
                bot.reply_to(message, f"ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø±Ø¯ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ù€: {keyword}")
            else:
                bot.reply_to(message, "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø©.")
            return

        elif user_text.startswith("/Ø§Ù„Ø±Ø¯ÙˆØ¯"):
            if RESPONSES:
                msg = "ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:\n"
                for k, v in RESPONSES.items():
                    msg += f"- {k} => {v}\n"
                bot.reply_to(message, msg)
            else:
                bot.reply_to(message, "ğŸ“­ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø¯ÙˆØ¯ Ø¨Ø¹Ø¯.")
            return

        elif user_text.startswith("/Ù…Ø³Ø§Ø¹Ø¯Ø©"):
            help_text = (
                "ğŸ› ï¸ Ø£ÙˆØ§Ù…Ø± Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†:\n\n"
                "/Ø§Ø¶Ù ÙƒÙ„Ù…Ø© => Ø§Ù„Ø±Ø¯  - Ù„Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ\n"
                "/Ø­Ø°Ù ÙƒÙ„Ù…Ø©           - Ù„Ø­Ø°Ù Ø±Ø¯\n"
                "/Ø§Ù„Ø±Ø¯ÙˆØ¯             - Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯\n"
                "/Ù…Ø³Ø§Ø¹Ø¯Ø©             - Ø¹Ø±Ø¶ Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©"
            )
            bot.reply_to(message, help_text)
            return

    # Ø±Ø¯ Ø¹Ø§Ø¯ÙŠ
    reply = get_response(user_text)
    bot.reply_to(message, reply)

bot.polling()
